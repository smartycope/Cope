#%%
from PIL import Image, ImageDraw, ImageFilter, ImageOps
import matplotlib.pyplot as plt
# from matplotlib.figure import Figure
from Cope.meme import look_at_this_graph
import plotly.express as px
import polars as pl
from pathlib import Path
# %% Just some sample data I had laying around
avg_reward_list = [-1255.480109068554,
    -1326.4896795651807,
    -1163.6425617332582,
    -1241.2170075882257,
    -1220.4998748097332,
    -1287.6309164807203,
    -1332.6997413856534,
    -472.65581009243124,
    2610.9426467178373,
    5596.160967952676,
    5445.228751644875,
    5579.16745939088,
    8072.32720528949,
    7446.11833739071,
    10027.501013872521,
    9598.834202976523,
    9063.74213048981,
    8589.188666651993,
    8509.466797011439,
    8361.035987288196,
    8318.212864480987,
    7945.087121225277,
    7944.553328186658,
    8011.569280909697,
    7682.6447084371885,
    7620.794489152197,
    7313.438528080186,
    7558.580388949782,
    7462.320853046571,
    7494.041232081989,
    7261.817005527169,
    7055.299284570208,
    7304.460912575621,
    7500.375408417286,
    8367.612542264202,
    8631.045448376202,
    8556.090875928101,
    8479.083034120957,
    8857.902237279623,
    8697.204986378292,
    8908.312417409934,
    8929.006523667213,
    9048.656602014347,
    9218.284940870992,
    9673.829147976305,
    9855.588801755503,
    10865.433612273198,
    10855.686630774762,
    10244.700989620951,
    11156.837141307895,
    12539.385906924263,
    13475.093869452778,
    12614.0533418148,
    14497.735855329312,
    13758.972716923487,
    13667.205041047253,
    13939.761224937363,
    13928.687749397059,
    13714.19415459711,
    13849.16411717301,
    13652.12353239999,
    13626.591467272028,
    13699.592954169993,
    13422.019099519104,
    13389.291328187295,
    13196.835319240276,
    13173.059698032705,
    12782.726802169771,
    12626.747557305443,
    12385.127793531337,
    12337.369420836378,
    12388.92431142701,
    11968.38302106752,
    11586.599455736454,
    10599.066782732903,
    10128.846445496234,
    9953.791913873245,
    9779.179068637726,
    9168.24243955379,
    9080.075563847648,
    8867.489114900143,
    8844.056541748567,
    8724.960865356883,
    8556.487706741813
]

ep_len_list = [29,
    59,
    89,
    72,
    80,
    53,
    51,
    134,
    208,
    222,
    126,
    140,
    236,
    98,
    254,
    122,
    107,
    107,
    141,
    134,
    142,
    105,
    144,
    151,
    102,
    136,
    97,
    168,
    130,
    146,
    106,
    108,
    172,
    167,
    235,
    180,
    135,
    134,
    197,
    118,
    141,
    100,
    126,
    133,
    178,
    134,
    238,
    132,
    120,
    299,
    281,
    249,
    124,
    310,
    176,
    100,
    158,
    105,
    70,
    156,
    99,
    77,
    156,
    43,
    64,
    51,
    51,
    39,
    41,
    29,
    60,
    119,
    67,
    73,
    59,
    86,
    79,
    70,
    79,
    82,
    72,
    67,
    91,
    76
]

# %%
fig, ax1 = plt.subplots()

ax1.plot(avg_reward_list, label='Avg. Reward', color='blue')
ax1.set_xlabel("Episode")
ax1.set_ylabel("Avg. Episodic Reward", color='blue')
ax1.tick_params(axis='y', labelcolor='blue')

ax2 = ax1.twinx()
ax2.plot(ep_len_list, label='Episode Length', color='green')
ax2.set_ylabel("Episode Length", color='green')
ax2.tick_params(axis='y', labelcolor='green')

fig.suptitle('Look at this Graaaaph')

#%% Test matplotlib
look_at_this_graph(fig).show()

#%% Test plotly
# No, it's not a good graph. I don't care
look_at_this_graph(px.line(x=avg_reward_list))

#%%
path = (Path.cwd().parent.parent/'Cope'/'assets'/'look at this photograph template.png').absolute()

#%% Test bytes
with open(path, 'rb') as f:
    # print(len(f.read()))
    display(look_at_this_graph(f.read()))

#%% Test filepath
look_at_this_graph(str(path))
